<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane prefHeight="768.0" prefWidth="1024.0" styleClass="root-container" xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1" fx:controller="clinicaveterinaria.meupetemdia.controller.ProximasVacinasController">

    <!-- ========== BARRA SUPERIOR ========== -->
    <top>
        <HBox fx:id="hboxHeader" alignment="CENTER" styleClass="header-bar">
            <padding>
                <Insets bottom="15" left="30" right="30" top="15" />
            </padding>

            <Button fx:id="btnVoltar" onAction="#handleVoltar" styleClass="secondary-button" text="â† Voltar">
                <HBox.margin>
                    <Insets right="20" />
                </HBox.margin>
            </Button>

            <Label fx:id="lblTitulo" styleClass="app-title" text="ðŸ“… PrÃ³ximas Vacinas">
                <HBox.hgrow>ALWAYS</HBox.hgrow>
            </Label>
        </HBox>
    </top>

    <!-- ========== CONTEÃšDO CENTRAL ========== -->
    <center>
        <VBox spacing="20">
            <padding>
                <Insets bottom="30" left="30" right="30" top="30" />
            </padding>

            <!-- ========== CARDS DE RESUMO ========== -->
            <HBox alignment="CENTER" spacing="20">
                <!-- Card Total -->
                <VBox alignment="CENTER" prefWidth="200" spacing="5" styleClass="card">
                    <padding>
                        <Insets bottom="15" left="15" right="15" top="15" />
                    </padding>
                    <Label styleClass="info-label" text="ðŸ“‹ Total" />
                    <Label fx:id="lblTotal" styleClass="screen-title" text="0">
                        <font>
                            <Font size="32" />
                        </font>
                    </Label>
                    <Label styleClass="info-label" text="vacinas pendentes" />
                </VBox>

                <!-- Card Vencidas -->
                <VBox alignment="CENTER" prefWidth="200" spacing="5" style="-fx-border-color: #d32f2f; -fx-border-width: 2px;" styleClass="card">
                    <padding>
                        <Insets bottom="15" left="15" right="15" top="15" />
                    </padding>
                    <Label styleClass="info-label" text="âŒ Vencidas" />
                    <Label fx:id="lblVencidas" style="-fx-text-fill: #d32f2f; -fx-font-size: 32px; -fx-font-weight: bold;" text="0" />
                    <Label styleClass="info-label" text="atrasadas" />
                </VBox>

                <!-- Card PrÃ³ximas -->
                <VBox alignment="CENTER" prefWidth="200" spacing="5" style="-fx-border-color: #f57c00; -fx-border-width: 2px;" styleClass="card">
                    <padding>
                        <Insets bottom="15" left="15" right="15" top="15" />
                    </padding>
                    <Label styleClass="info-label" text="âš ï¸ PrÃ³ximas" />
                    <Label fx:id="lblProximas" style="-fx-text-fill: #f57c00; -fx-font-size: 32px; -fx-font-weight: bold;" text="0" />
                    <Label styleClass="info-label" text="em atÃ© 30 dias" />
                </VBox>
            </HBox>

            <!-- ========== BARRA DE FILTROS ========== -->
            <HBox fx:id="hboxFiltros" alignment="CENTER_LEFT" spacing="15">
                <Label styleClass="form-label" text="Filtros:" />

                <ComboBox fx:id="cmbFiltroStatus" prefWidth="150" promptText="Status" styleClass="combo-box" />

                <ComboBox fx:id="cmbFiltroPet" prefWidth="250" promptText="Todos os pets" styleClass="combo-box" />

                <Button fx:id="btnAtualizar" onAction="#handleAtualizar" styleClass="secondary-button" text="ðŸ”„ Atualizar" />
            <Button fx:id="btnAvisarDono"   onAction="#handleAvisarDono"  mnemonicParsing="false" text="Avisar Dono" />
            </HBox>

            <!-- ========== TABELA ========== -->
            <VBox spacing="10" VBox.vgrow="ALWAYS">
                <Label styleClass="section-title" text="Lista de Vacinas Pendentes" />

                <TableView fx:id="tblProximasVacinas" styleClass="table-view" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="colStatus" prefWidth="80" text="Status" />
                        <TableColumn fx:id="colPet" prefWidth="150" text="Pet" />
                        <TableColumn fx:id="colDono" prefWidth="150" text="ProprietÃ¡rio" />
                        <TableColumn fx:id="colVacina" prefWidth="180" text="Vacina" />
                        <TableColumn fx:id="colUltimaDose" prefWidth="110" text="Ãšltima Dose" />
                        <TableColumn fx:id="colProximaDose" prefWidth="110" text="PrÃ³xima Dose" />
                        <TableColumn fx:id="colDiasRestantes" prefWidth="80" text="Dias" />
                    </columns>
                    <columnResizePolicy>
                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                    </columnResizePolicy>
                </TableView>

                <!-- Legenda -->
                <HBox alignment="CENTER_LEFT" spacing="20">
                    <Label styleClass="form-label" text="Legenda:" />
                    <HBox alignment="CENTER_LEFT" spacing="5">
                        <Label style="-fx-text-fill: #d32f2f; -fx-font-size: 18px;" text="â—" />
                        <Label styleClass="info-label" text="Vencida" />
                    </HBox>
                    <HBox alignment="CENTER_LEFT" spacing="5">
                        <Label style="-fx-text-fill: #f57c00; -fx-font-size: 18px;" text="â—" />
                        <Label styleClass="info-label" text="Vence em atÃ© 30 dias" />
                    </HBox>
                    <HBox alignment="CENTER_LEFT" spacing="5">
                        <Label style="-fx-text-fill: #388e3c; -fx-font-size: 18px;" text="â—" />
                        <Label styleClass="info-label" text="Em dia" />
                    </HBox>
                </HBox>
            </VBox>

        </VBox>
    </center>

</BorderPane>
