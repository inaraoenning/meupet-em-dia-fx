<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="clinicaveterinaria.meupetemdia.controller.ProximasVacinasController"
            styleClass="root-container"
            prefHeight="768.0"
            prefWidth="1024.0">

    <!-- ========== BARRA SUPERIOR ========== -->
    <top>
        <HBox fx:id="hboxHeader" styleClass="header-bar" alignment="CENTER">
            <padding>
                <Insets top="15" right="30" bottom="15" left="30" />
            </padding>

            <Button fx:id="btnVoltar" text="â† Voltar" styleClass="secondary-button"
                    onAction="#handleVoltar">
                <HBox.margin>
                    <Insets right="20" />
                </HBox.margin>
            </Button>

            <Label fx:id="lblTitulo" text="ðŸ“… PrÃ³ximas Vacinas" styleClass="app-title">
                <HBox.hgrow>ALWAYS</HBox.hgrow>
            </Label>
        </HBox>
    </top>

    <!-- ========== CONTEÃšDO CENTRAL ========== -->
    <center>
        <VBox spacing="20">
            <padding>
                <Insets top="30" right="30" bottom="30" left="30" />
            </padding>

            <!-- ========== CARDS DE RESUMO ========== -->
            <HBox spacing="20" alignment="CENTER">
                <!-- Card Total -->
                <VBox styleClass="card" alignment="CENTER" spacing="5" prefWidth="200">
                    <padding>
                        <Insets top="15" right="15" bottom="15" left="15" />
                    </padding>
                    <Label text="ðŸ“‹ Total" styleClass="info-label" />
                    <Label fx:id="lblTotal" text="0" styleClass="screen-title">
                        <font>
                            <Font size="32" />
                        </font>
                    </Label>
                    <Label text="vacinas pendentes" styleClass="info-label" />
                </VBox>

                <!-- Card Vencidas -->
                <VBox styleClass="card" alignment="CENTER" spacing="5" prefWidth="200"
                      style="-fx-border-color: #d32f2f; -fx-border-width: 2px;">
                    <padding>
                        <Insets top="15" right="15" bottom="15" left="15" />
                    </padding>
                    <Label text="âŒ Vencidas" styleClass="info-label" />
                    <Label fx:id="lblVencidas" text="0" style="-fx-text-fill: #d32f2f; -fx-font-size: 32px; -fx-font-weight: bold;" />
                    <Label text="atrasadas" styleClass="info-label" />
                </VBox>

                <!-- Card PrÃ³ximas -->
                <VBox styleClass="card" alignment="CENTER" spacing="5" prefWidth="200"
                      style="-fx-border-color: #f57c00; -fx-border-width: 2px;">
                    <padding>
                        <Insets top="15" right="15" bottom="15" left="15" />
                    </padding>
                    <Label text="âš ï¸ PrÃ³ximas" styleClass="info-label" />
                    <Label fx:id="lblProximas" text="0" style="-fx-text-fill: #f57c00; -fx-font-size: 32px; -fx-font-weight: bold;" />
                    <Label text="em atÃ© 30 dias" styleClass="info-label" />
                </VBox>
            </HBox>

            <!-- ========== BARRA DE FILTROS ========== -->
            <HBox fx:id="hboxFiltros" spacing="15" alignment="CENTER_LEFT">
                <Label text="Filtros:" styleClass="form-label" />

                <ComboBox fx:id="cmbFiltroStatus" promptText="Status"
                          styleClass="combo-box" prefWidth="150" />

                <ComboBox fx:id="cmbFiltroPet" promptText="Todos os pets"
                          styleClass="combo-box" prefWidth="250" />

                <Button fx:id="btnAtualizar" text="ðŸ”„ Atualizar" styleClass="secondary-button"
                        onAction="#handleAtualizar" />
            </HBox>

            <!-- ========== TABELA ========== -->
            <VBox spacing="10" VBox.vgrow="ALWAYS">
                <Label text="Lista de Vacinas Pendentes" styleClass="section-title" />

                <TableView fx:id="tblProximasVacinas" styleClass="table-view" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="colStatus" text="Status" prefWidth="80" />
                        <TableColumn fx:id="colPet" text="Pet" prefWidth="150" />
                        <TableColumn fx:id="colDono" text="ProprietÃ¡rio" prefWidth="150" />
                        <TableColumn fx:id="colVacina" text="Vacina" prefWidth="180" />
                        <TableColumn fx:id="colUltimaDose" text="Ãšltima Dose" prefWidth="110" />
                        <TableColumn fx:id="colProximaDose" text="PrÃ³xima Dose" prefWidth="110" />
                        <TableColumn fx:id="colDiasRestantes" text="Dias" prefWidth="80" />
                    </columns>
                    <columnResizePolicy>
                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                    </columnResizePolicy>
                </TableView>

                <!-- Legenda -->
                <HBox spacing="20" alignment="CENTER_LEFT">
                    <Label text="Legenda:" styleClass="form-label" />
                    <HBox spacing="5" alignment="CENTER_LEFT">
                        <Label text="â—" style="-fx-text-fill: #d32f2f; -fx-font-size: 18px;" />
                        <Label text="Vencida" styleClass="info-label" />
                    </HBox>
                    <HBox spacing="5" alignment="CENTER_LEFT">
                        <Label text="â—" style="-fx-text-fill: #f57c00; -fx-font-size: 18px;" />
                        <Label text="Vence em atÃ© 30 dias" styleClass="info-label" />
                    </HBox>
                    <HBox spacing="5" alignment="CENTER_LEFT">
                        <Label text="â—" style="-fx-text-fill: #388e3c; -fx-font-size: 18px;" />
                        <Label text="Em dia" styleClass="info-label" />
                    </HBox>
                </HBox>
            </VBox>

        </VBox>
    </center>

</BorderPane>